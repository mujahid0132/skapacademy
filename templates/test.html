{% load tailwind_tags static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout - Skap Academy</title>
  {% tailwind_css %}
</head>
<body>
  <div class="flex items-center justify-center border-b bg-white py-4 sm:px-10 lg:px-20 xl:px-32 fixed top-0 w-full z-50">
    <a href="#" class="text-2xl font-bold text-gray-800"><img src="{% static 'img/logo.png' %}" alt="logo" class="h-14"/></a>
  </div>
  <div class="grid sm:px-10 lg:grid-cols-2 lg:px-20 xl:px-32 pt-20">
    <div class="px-4 pt-8">
      <p class="text-xl font-medium">Order Summary</p>
      <p class="text-gray-400">Check your items. And select a suitable shipping method.</p>
      <div class="mt-8 space-y-3 rounded-lg bg-white px-2 py-4 sm:px-6 max-h-96 overflow-y-auto border">
        {% if products %}
        {% for pr in products %}
        <div class="flex rounded-lg bg-white relative border py-2">
          <img class="m-2 h-24 w-52 rounded-md object-contain object-center" src="/media/{{pr.image}}" alt="" />
          <span id="quantity{{pr.slug}}" class="bg-red-500 text-white w-4 text-xs absolute -top-2 -right-2 z-30 aspect-square rounded-full text-center">1</span>
          <div class="flex w-full flex-col px-4 py-4">
            <span class="font-semibold">{{pr.name}}</span>
            <span class="float-right text-gray-400">Sku: {{pr.sku}}</span>
            <div class="flex space-x-2">
              <span class="font-semibold text-2xl" >Rs. </span>
              <div class="flex flex-col -space-y-2">
                <span {% if pr.discounted_price %}class="line-through text-xs"{% endif %} id="productprice">{{pr.price}}</span>
              <span class="font-semibold" id="productdiscountedprice">{{pr.discounted_price}}</span>
              </div>
            </div>
          </div>
        </div>
  {% endfor %}
  {% endif %}
      </div>
      
    </div>
    <div class="mt-10 px-4 pt-8 lg:mt-0">
      <p class="text-xl font-medium">Shipping Details</p>
      <p class="text-gray-400">Complete your order by providing the following details.</p>
      <div class="">
        <label for="email" class="mt-4 mb-2 block text-sm font-medium">Email</label>
        <div class="relative">
          <input type="text" id="email" required name="email" class="w-full rounded-md border border-gray-200 px-4 py-3 pl-11 text-sm shadow-sm outline-none focus:z-10 focus:border-blue-500 focus:ring-blue-500" placeholder="youremail@gmail.com" />
          <div class="pointer-events-none absolute inset-y-0 left-0 inline-flex items-center px-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207" />
            </svg>
          </div>
        </div>
        <label for="phone_no" class="mt-4 mb-2 block text-sm font-medium">Mobile No.</label>
        <div class="relative">
          <input type="tel" id="phone_no" required name="phone_no" class="w-full rounded-md border border-gray-200 px-4 py-3 pl-11 text-sm shadow-sm outline-none focus:z-10 focus:border-blue-500 focus:ring-blue-500" placeholder="03XX XXXXXXX" />
          <div class="pointer-events-none absolute inset-y-0 left-0 inline-flex items-center px-3">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4 text-gray-400"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
          </div>
        </div>
        <div class="flex">
          <label for="first_name" class="w-2/4 mt-4 mb-2 block text-sm font-medium">First Name</label>
        <label for="last_name" class="w-2/4 mt-4 mb-2 block text-sm font-medium">Last Name</label></div>
        <div class="flex space-x-2">
          <input type="text" required id="first_name" name="first_name" class="alpha w-full rounded-md border border-gray-200 px-2 py-3 text-sm uppercase shadow-sm outline-none focus:z-10 focus:border-blue-500 focus:ring-blue-500" placeholder="First Name" />
          <input type="text" required id="last_name" name="last_name" class="alpha w-full rounded-md border border-gray-200 px-2 py-3 text-sm uppercase shadow-sm outline-none focus:z-10 focus:border-blue-500 focus:ring-blue-500" placeholder="Last Name" />
        </div>
        
        <label for="address" class="mt-4 mb-2 block text-sm font-medium">Shipping Address</label>
        <div class="flex flex-col space-y-2">
            <input type="text" id="address" name="address" class="w-full rounded-md border border-gray-200 px-4 py-3 text-sm shadow-sm outline-none focus:z-10 focus:border-blue-500 focus:ring-blue-500" placeholder="Address" />
            <input type="text" id="city" name="city" class="alpha w-full rounded-md border border-gray-200 px-4 py-3 text-sm shadow-sm outline-none focus:z-10 focus:border-blue-500 focus:ring-blue-500" placeholder="City" />
            <input type="text" name="postal_code" class="w-full rounded-md border border-gray-200 px-4 py-3 text-sm shadow-sm outline-none focus:z-10 focus:border-blue-500 focus:ring-blue-500" placeholder="Postal Code" />
        </div>
        <p class="mb-2 mt-10 text-lg font-medium">Payment Method</p>
      <div class="relative">
        <input class="peer hidden" name="paymentmethod" id="paymentmethod" checked type="radio"/>
        <span class="peer-checked:border-gray-700 absolute right-4 top-1/2 box-content block h-3 w-3 -translate-y-1/2 rounded-full border-8 border-gray-300 bg-white"></span>
        <label class="peer-checked:border-2 peer-checked:border-gray-700 peer-checked:bg-gray-50 flex cursor-pointer select-none rounded-lg border border-gray-300 p-4" for="paymentmethod">
          <div class="flex items-center">
            <span class=" font-semibold">Cash On Delivery</span>
          </div>
        </label>
      </div>
        <!-- Total -->
        <div class="mt-6 border-t border-b py-2">
          <div class="flex items-center justify-between">
            <p class="text-sm font-medium text-gray-900">Subtotal</p>
            <p class="text-gray-900">Rs. {{subtotal}}</p>
          </div>
          <div class="flex items-center justify-between">
            <p class="text-sm font-medium text-gray-900">Shipping</p>
            <p class="text-gray-900">Rs. {{shipping}}</p>
          </div>
        </div>
        <div class="mt-6 flex items-center justify-between">
          <p class="text-sm font-medium text-gray-900">Total</p>
          <p class="text-2xl text-gray-900">Rs. {{total}}</p>
        </div>
      </div>
      <button class="mt-4 mb-8 w-full rounded-md bg-skapblue px-6 py-3 font-medium text-white">Place Order</button>
    </div>
  </div>
  
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cleave.js/1.6.0/cleave.min.js" integrity="sha512-KaIyHb30iXTXfGyI9cyKFUIRSSuekJt6/vqXtyQKhQP6ozZEGY8nOtRS6fExqE4+RbYHus2yGyYg1BrqxzV6YA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    var cleave = new Cleave("#phone_no", {
      blocks: [4, 7],
      numericOnly: true,
    });
    document.querySelectorAll(".alpha").forEach((input) => {
      input.addEventListener("input", function () {
        const aplhabetsonly = /^[a-zA-Z]+$/;
        if (!aplhabetsonly.test(input.value)) {
          input.value = input.value.replace(/[^a-zA-Z]+/g, "");
        }
      });
    });
</script>
</html>