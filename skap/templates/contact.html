{% extends 'skapbase.html' %}
{% load static %}
{% block title %}Contact{% endblock title %}
{% block breadcrumbtitle %}Contact{% endblock breadcrumbtitle %}
{% block breadcrumb %}
<a href="{{home_url}}">Home</a>&nbsp;>&nbsp;Contact
{% endblock breadcrumb %}
{% block css %}
<link rel="stylesheet" href="{% static 'css/contact.css' %}" />
{% endblock css %}
{% block main %}
  <section
    class="bg-white w-full h-[28rem] md:h-[23rem] relative flex items-center justify-center"
  >
    <div
      class="w-11/12 lg:w-3/4 bg-white h-[32rem] md:h-[30rem] shadow-2xl z-30 absolute top-0 md:border-l-4 md:border-black flex flex-col justify-center items-center md:items-start py10 px-4 b850:px-10"
      style="overflow-x: hidden;"
    >
      <span class="text-3xl font-bold md:mt-0">Get In Touch</span>
      <span
        class="sm:w-3/4 md:w-1/2 text-xl my-2 leading-6 text-center md:text-left"
      >
        Gravida vulputate aliquet tempor sit. Neque sed pretium non urna sed
        etid aenean haretra quam placerat adipiscing penatibus aliquam
        adipiscing gravida elementum aliquet eget senectus felis enim diam
        molestie.
      </span>
      <div class="mt-1">
        <p class="text-xl px-4 space-x-14">
          <span class="font-bold">Phone:</span><span>0300 123 4568</span>
        </p>
        <p class="text-xl px-4 space-x-14">
          <span class="font-bold">Email:</span><span>info@skap.com.pk</span>
        </p>
        <p class="text-xl px-4 space-x-14">
          <span class="font-bold">Address:</span><span>skaponline.com</span>
        </p>
      </div>
      <button
        id="contactbtn"
            class="bg-skapred text-white h-10 text-sm w-4/5 py-1 rounded-sm my-3 md:hidden"
          >
            Contact Us
          </button>
      <div
        class="flex flex-col items-start justify-start space-y-3 md:px-6 md:w-1/2 md:border-white md:pt-6"
      >
        <span class="text-3xl font-bold">Found Us</span>
        <div class="flex space-x-2 text-white md:px-2 b850:px-8">
          <div
            class="rounded-full h-10 sm:h-14 w-10 sm:w-14 bg-skapblue flex items-center justify-center"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-facebook"
            >
              <path
                d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"
              ></path>
            </svg>
          </div>
          <div
            class="rounded-full h-10 sm:h-14 w-10 sm:w-14 bg-skapblue flex items-center justify-center"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-youtube"
            >
              <path
                d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"
              ></path>
              <polygon
                points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"
              ></polygon>
            </svg>
          </div>
          <div
            class="rounded-full h-10 sm:h-14 w-10 sm:w-14 bg-skapblue flex items-center justify-center"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-twitter"
            >
              <path
                d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"
              ></path>
            </svg>
          </div>
          <div
            class="rounded-full h-10 sm:h-14 w-10 sm:w-14 bg-skapblue flex items-center justify-center"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-linkedin"
            >
              <path
                d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"
              ></path>
              <rect x="2" y="9" width="4" height="12"></rect>
              <circle cx="4" cy="4" r="2"></circle>
            </svg>
          </div>
          <div
            class="rounded-full h-10 sm:h-14 w-10 sm:w-14 bg-skapblue flex items-center justify-center"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="feather feather-instagram"
            >
              <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
              <path
                d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"
              ></path>
              <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
            </svg>
          </div>
        </div>
      </div>
      <div
      id="contactus"
        class="absolute bg-white translate-x-2/4 md:translate-x-0 md:right-4 b850:right-10 b1150:right-24 w-80 flex flex-col items-center py-5 shadow-2xl transition-all duration-700"
      >
      <button onclick="togglecontactus()" class="absolute font-extrabold right-4 text-4xl md:hidden -mt-1">x</button>
        <span class="text-4xl font-bold">Contact Us
        </span>
        <span class="text-sm tracking-wider mt-2"
          >Find your dream tour today!</span
        >
        <form
          method="post"
          action="/contact/"
          name = "contact_form"
          class="w-full flex flex-col items-center justify-center py-4"
        >
        {% csrf_token %}
          <input
            type="text"
            placeholder="Name"
            name="name"
            required
            class="bg-gray-100 w-4/5 h-9 rounded-sm px-3 text-xs flex items-center font-semibold"
          />
          <span class="text-sm text-red-500 py-2"></span>  

          <input
            type="email"
            placeholder="Email"
            name="email"
            required
            class="bg-gray-100 w-4/5 h-9 rounded-sm px-3 text-xs flex items-center font-semibold"
          />
            <span class="text-sm text-red-500 py-2"></span>

          <input
            type="tel"
            placeholder="Phone No."
            name="phone_no"
            id="phone_no"
            required
            class="bg-gray-100 w-4/5 h-9 rounded-sm px-3 text-xs flex items-center font-semibold"
          />
            <span class="text-sm text-red-500 py-2"></span>

          <input
            type="text"
            placeholder="Message"
            name="message"
            required
            class="bg-gray-100 w-4/5 h-9 rounded-sm px-3 text-xs flex items-center font-semibold"
          />
            <span class="text-sm text-red-500 py-2"></span>
          <button
            class="bg-skapred text-white h-10 text-sm w-4/5 py-1 rounded-sm"
            id="cfsb"
          >
            Submit
          </button>
        </form>
      </div>
    </div>
  </section>
  <section
    class="bg-gray-500 w-full h-[28rem] relative flex items-center justify-center"
  >
    <iframe
    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d8820.850371738883!2d74.32222622863688!3d31.526831318745103!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!3m2!1sen!2s!4v1679582504710!5m2!1sen!2s"
    width="100%"
    height="100%"
    style="border: 0"
    allowfullscreen=""
    loading="lazy"
    referrerpolicy="no-referrer-when-downgrade"
    ></iframe>
  </section>

{% endblock main %}
{% block script %}
<script>
  let contactus = document.getElementById("contactus")
  console.log(contactus.style.right);
    let contactbtn = document.getElementById("contactbtn")
    contactbtn.addEventListener("click", togglecontactus )
    function togglecontactus() {
      let currentpos = contactus.style.right;
      if (currentpos == "50%") {
        contactus.style.right = "-100%"
      }
      else{
        contactus.style.right = "50%"
      }
    }
    var cleave = new Cleave("#phone_no", {
    blocks: [4, 7],
    numericOnly: true,
  });
    const form = document.forms.contact_form;
    const nameInput = form.elements.name;
    const emailInput = form.elements.email;
    const phoneNoInput = form.elements.phone_no;
    const message = form.elements.message;
    const cfsb = document.getElementById("cfsb")
    const phoneNoRegex = /^03[0-9]{2} [0-9]{7,11}$/;
    form.addEventListener('submit', validate);
    cfsb.addEventListener('click', validate);
    function validate(event) {
      event.preventDefault();
      resetErrors();
      let valid = true
      console.log(emailInput.checkValidity());
      if (!emailInput.value.trim() || !emailInput.checkValidity()) {
        setError(emailInput, 'Please enter a valid email address');
        valid = false
      }
      if (!phoneNoRegex.test(phoneNoInput.value.trim())) {
        setError(phoneNoInput, 'Please enter a valid Pakistani phone number');
        valid = false
      }
      if (!nameInput.value.trim()) {
        setError(nameInput, 'Name is required');
        valid = false
      }
      if (!message.value.trim()) {
        setError(message, 'Message is required');
        valid = false
      }
      if(valid){form.submit();}
      
    }
    
    function setError(input, message) {
      input.classList.add('border-red-500');
      const errorMessage = input.nextElementSibling;
      errorMessage.textContent = message;
    }
    
    function resetErrors() {
      const errorMessages = form.querySelectorAll('.text-sm.text-red-500');
      errorMessages.forEach((message) => (message.textContent = ''));
    
      const inputs = form.querySelectorAll('input');
      inputs.forEach((input) => input.classList.remove('border-red-500'));
    }
</script>
{% endblock script %}